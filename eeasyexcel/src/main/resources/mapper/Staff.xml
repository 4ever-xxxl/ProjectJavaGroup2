<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dao.StaffDao">

    <select id="list" resultType="com.example.entity.Staff">
        select * from staff;
    </select>
    <select id="getCompanyStaff" resultType="com.example.entity.Staff">
        select * from staff where sID =#{staffId} and sCompanyID=#{companyId};
    </select>

    <select id="searchCompanyStaff" resultType="com.example.entity.Staff">
        SELECT *
        FROM staff
        WHERE 1=1
        <if test="name != null and name != ''">
            AND sName like concat('%', #{ name }, '%')
        </if>
        <if test="maxSalary != 0">
            AND sSalary &lt;= #{maxSalary}
        </if>
        <if test="minSalary != 0">
            AND sSalary &gt;= #{minSalary}
        </if>
        <if test="disabled != null">
            AND sDisabled = #{disabled}
        </if>
        <if test="address != null and address != ''">
            AND sAddress LIKE CONCAT('%', #{address}, '%')
        </if>
    </select>


    <update id="updateCompanyStaff">
        UPDATE staff
        SET sName = #{sName},
            sSex = #{sSex},
            sIdNum = #{sIdNum},
            sPhone = #{sPhone},
            sDisabled = #{sDisabled},
            sAddress = #{sAddress},
            sEduBackground = #{sEduBackground},
            sPosition = #{sPosition},
            sHireDate = #{sHireDate},
            sSalary = #{sSalary}
        WHERE sID = #{sId} AND sCompanyId = #{sCompanyId}
    </update>

    <delete id="deleteCompanyStaff">
        delete from staff where sID=#{sId} and sCompanyId=#{companyId}
    </delete>

    <insert id="addCompanyStuff">
        insert into staff (sID, sName, sSex, sIdNum, sPhone, sCompanyID, sDisabled, sAddress, sEduBackground, sPosition, sHireDate, sSalary)
        value (#{sId}, #{sName},#{sSex},#{sIdNum},#{sPhone},#{sCompanyId},#{sDisabled},#{sAddress},#{sEduBackground},#{sPosition},#{sHireDate},#{sSalary})
    </insert>

</mapper>